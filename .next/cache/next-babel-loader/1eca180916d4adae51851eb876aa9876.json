{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport ProductCounter from '../../components/ProductCounter';\nimport ProductAttr from './Attributes';\nimport { addProduct } from '../../redux/actions';\nimport styles from './Product.module.css';\n\nvar ProductDescription = function ProductDescription(_ref) {\n  var product = _ref.product,\n      addProduct = _ref.addProduct,\n      in_cart = _ref.in_cart;\n  var name = product.name,\n      price = product.price,\n      description = product.description,\n      attr = product.attr;\n\n  var _useState = useState(''),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(1),\n      count = _useState2[0],\n      setCount = _useState2[1];\n\n  var _useState3 = useState(attr[0]),\n      attribute = _useState3[0],\n      setAttribute = _useState3[1];\n\n  var clickAttr = function clickAttr(attr) {\n    setAttribute(attr);\n  };\n\n  var changeCount = function changeCount(num) {\n    setCount(+parseInt(num));\n  };\n\n  var addCart = function addCart() {\n    var message = '';\n\n    if (count >= 1 && isFinite(count) && attribute !== '') {\n      var obj = Object.assign(product, {\n        count: count\n      });\n      addProduct(obj);\n    } else if (count < 1 || !isFinite(count)) {\n      message = 'Неверное количество товара';\n    } else if (attribute === '') {\n      message = 'Выберете атрибут';\n    }\n\n    if (error !== message) setError(message);\n  };\n\n  var classNames = styles.btn_add_product + ' btn btn-primary ';\n  if (in_cart) classNames += styles.in_cart;\n  return __jsx(\"div\", {\n    className: styles.product_description\n  }, __jsx(\"h2\", {\n    className: styles.product_name\n  }, name), __jsx(\"span\", {\n    className: styles.product_price\n  }, \"$\", price), __jsx(\"p\", {\n    className: \"product_about\"\n  }, description), __jsx(ProductAttr, {\n    data: attr,\n    clickAttr: clickAttr\n  }), __jsx(ProductCounter, {\n    changeCount: changeCount,\n    count: 1\n  }), __jsx(\"div\", {\n    className: \"product_add_cart\"\n  }, __jsx(\"button\", {\n    onClick: addCart,\n    type: \"button\",\n    className: classNames\n  }, __jsx(\"i\", {\n    className: \"fa fa-shopping-cart mr-1\",\n    \"aria-hidden\": \"true\"\n  }), ' ', __jsx(\"span\", null, \"Add to Cart\"))), __jsx(\"p\", {\n    className: styles.error_message\n  }, error));\n};\n\nvar mapStateToProps = function mapStateToProps(_ref2, _ref3) {\n  var cart = _ref2.cart;\n  var product = _ref3.product;\n  var in_cart = cart.some(function (item) {\n    return product.id === item.id;\n  });\n  return {\n    in_cart: in_cart\n  };\n};\n\nvar mapDispatchToProps = {\n  addProduct: addProduct\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDescription);","map":null,"metadata":{},"sourceType":"module"}