{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\Programming languages\\\\React\\\\re-store\\\\pages\\\\shop\\\\product\\\\[id].js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Description from '../../../routes/product/description';\nimport Carousel from 'react-bootstrap/Carousel';\nimport Spinner from '../../../components/spinner';\nimport Error from '../../../components/error';\nimport { withRouter } from 'next/router';\nimport styles from '../../../routes/product/product.module.css';\nimport prevArrow from '../../../routes/product/prev.svg';\nimport nextArrow from '../../../routes/product/next.svg';\n\nclass ProductContainer extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"query\", useRouter());\n\n    _defineProperty(this, \"state\", {\n      error: this.props.error,\n      loading: !this.props.serverProduct,\n      product: this.props.serverProduct\n    });\n\n    _defineProperty(this, \"carouselProps\", {\n      indicators: false,\n      prevIcon: __jsx(\"img\", {\n        className: styles.carousel_arrows,\n        src: prevArrow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }\n      }),\n      nextIcon: __jsx(\"img\", {\n        className: styles.carousel_arrows,\n        src: nextArrow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }\n      })\n    });\n  }\n\n  static async getInitialProps({\n    req,\n    query\n  }) {\n    let {\n      id\n    } = query;\n    let serverProduct = null;\n\n    if (!req) {\n      return {\n        serverProduct\n      };\n    }\n\n    try {\n      const res = await fetch(`http://localhost:4000/phones/${id}`);\n      serverProduct = await res.json();\n    } catch (error) {\n      return {\n        error\n      };\n    }\n\n    return {\n      serverProduct\n    };\n  }\n\n  load() {\n    console.log(`http://localhost:4000/phones/${this.query.id}`); // let res = await fetch(`http://localhost:4000/phones/${query.id}`)\n    // let phones = await res.json()\n    // return await res.json()\n  }\n\n  componentDidMount() {\n    if (!this.state.product) {\n      this.load(); // this.setState({ phones: this.load() })\n    }\n  }\n\n  render() {\n    let {\n      loading,\n      error,\n      product\n    } = this.state;\n\n    if (error) {\n      return __jsx(Error, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 14\n        }\n      });\n    }\n\n    let CarouselComponents = __jsx(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 30\n      }\n    });\n\n    if (!loading) CarouselComponents = __jsx(Carousel, _extends({}, this.carouselProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }), product.gallery.map(item => {\n      return __jsx(Carousel.Item, {\n        key: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }\n      }, __jsx(\"img\", {\n        className: \"gallery-image\",\n        src: item,\n        alt: \"Gallery\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 18\n        }\n      }));\n    }));\n    return __jsx(\"div\", {\n      className: styles.single_page,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: styles.product_ceil,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, CarouselComponents)), __jsx(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, loading ? __jsx(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }) : __jsx(Description, {\n      product: product,\n      history: this.props.history,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nexport default ProductContainer;","map":{"version":3,"sources":["D:/Programming languages/React/re-store/pages/shop/product/[id].js"],"names":["React","Component","Description","Carousel","Spinner","Error","withRouter","styles","prevArrow","nextArrow","ProductContainer","useRouter","error","props","loading","serverProduct","product","indicators","prevIcon","carousel_arrows","nextIcon","getInitialProps","req","query","id","res","fetch","json","load","console","log","componentDidMount","state","render","CarouselComponents","carouselProps","gallery","map","item","single_page","product_ceil","history"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Description from '../../../routes/product/description'\r\nimport Carousel from 'react-bootstrap/Carousel'\r\nimport Spinner from '../../../components/spinner'\r\nimport Error from '../../../components/error'\r\nimport { withRouter } from 'next/router'\r\nimport styles from '../../../routes/product/product.module.css'\r\nimport prevArrow from '../../../routes/product/prev.svg'\r\nimport nextArrow from '../../../routes/product/next.svg'\r\n\r\nclass ProductContainer extends Component {\r\n  static async getInitialProps({ req, query }) {\r\n    let { id } = query\r\n    let serverProduct = null\r\n    if (!req) {\r\n      return { serverProduct }\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`http://localhost:4000/phones/${id}`)\r\n      serverProduct = await res.json()\r\n    } catch (error) {\r\n      return { error }\r\n    }\r\n\r\n    return { serverProduct }\r\n  }\r\n  query = useRouter()\r\n\r\n  load() {\r\n    console.log(`http://localhost:4000/phones/${this.query.id}`)\r\n    // let res = await fetch(`http://localhost:4000/phones/${query.id}`)\r\n    // let phones = await res.json()\r\n\r\n    // return await res.json()\r\n  }\r\n\r\n  state = {\r\n    error: this.props.error,\r\n    loading: !this.props.serverProduct,\r\n    product: this.props.serverProduct,\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.state.product) {\r\n      this.load()\r\n      // this.setState({ phones: this.load() })\r\n    }\r\n  }\r\n\r\n  carouselProps = {\r\n    indicators: false,\r\n    prevIcon: <img className={styles.carousel_arrows} src={prevArrow} />,\r\n    nextIcon: <img className={styles.carousel_arrows} src={nextArrow} />,\r\n  }\r\n\r\n  render() {\r\n    let { loading, error, product } = this.state\r\n\r\n    if (error) {\r\n      return <Error />\r\n    }\r\n\r\n    let CarouselComponents = <Spinner />\r\n    if (!loading)\r\n      CarouselComponents = (\r\n        <Carousel {...this.carouselProps}>\r\n          {product.gallery.map((item) => {\r\n            return (\r\n              <Carousel.Item key={item}>\r\n                {<img className=\"gallery-image\" src={item} alt=\"Gallery\" />}\r\n              </Carousel.Item>\r\n            )\r\n          })}\r\n        </Carousel>\r\n      )\r\n\r\n    return (\r\n      <div className={styles.single_page}>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n              <div className={styles.product_ceil}>{CarouselComponents}</div>\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n              {loading ? (\r\n                <Spinner />\r\n              ) : (\r\n                <Description product={product} history={this.props.history} />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProductContainer\r\n"]},"metadata":{},"sourceType":"module"}