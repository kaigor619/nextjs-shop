{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport Carousel from 'react-bootstrap/Carousel';\nimport { useRouter } from 'next/router';\nimport Description from './Description';\nimport Spinner from '../../components/Spinner';\nimport Error from '../../components/Spinner';\nimport PhoneService from '../../service/phone-service';\nimport styles from './Product.module.css';\nimport prevArrow from './images/prev.svg';\nimport nextArrow from './images/next.svg';\nconst carouselProps = {\n  indicators: false,\n  prevIcon: __jsx(\"img\", {\n    className: styles.carousel_arrows,\n    src: prevArrow\n  }),\n  nextIcon: __jsx(\"img\", {\n    className: styles.carousel_arrows,\n    src: nextArrow\n  })\n};\n\nconst CarouselComponents = ({\n  product\n}) => {\n  return __jsx(Carousel, carouselProps, product.gallery.map(item => {\n    return __jsx(Carousel.Item, {\n      key: item\n    }, __jsx(\"div\", {\n      className: styles.carousel_wrap\n    }, __jsx(\"img\", {\n      className: styles.gallery_image,\n      src: item,\n      alt: \"Gallery\"\n    })));\n  }));\n};\n\nconst ProductContainer = ({\n  serverProduct,\n  serverError\n}) => {\n  let {\n    0: product,\n    1: setProduct\n  } = useState(serverProduct);\n  let {\n    0: loading,\n    1: setLoading\n  } = useState(!serverProduct);\n  let {\n    0: error,\n    1: setError\n  } = useState(serverError);\n  let router = useRouter();\n\n  async function load() {\n    let product = null;\n\n    try {\n      product = await PhoneService().getPhone(router.query.id);\n    } catch (err) {\n      setError(err);\n    }\n\n    if (product) {\n      setProduct(product);\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (!product) {\n      load();\n    } else if (product.id != router.query.id) {\n      setLoading(true);\n      load();\n    }\n  });\n\n  if (error) {\n    return __jsx(Error, null);\n  }\n\n  if (loading) return __jsx(Spinner, null);\n  return __jsx(\"div\", {\n    className: styles.single_page\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(\"div\", {\n    className: styles.product_ceil\n  }, __jsx(CarouselComponents, {\n    product: product\n  }))), __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(Description, {\n    product: product\n  })))));\n};\n\nProductContainer.getInitialProps = async ({\n  req,\n  query\n}) => {\n  let {\n    id\n  } = query;\n  let serverProduct = null;\n\n  if (!req) {\n    return {\n      serverProduct\n    };\n  }\n\n  try {\n    serverProduct = await PhoneService().getPhone(id);\n  } catch (error) {\n    return {\n      serverError\n    };\n  }\n\n  return {\n    serverProduct\n  };\n};\n\nexport default ProductContainer;","map":null,"metadata":{},"sourceType":"module"}